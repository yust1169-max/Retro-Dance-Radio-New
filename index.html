<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Retro Dance Radio</title>
<style>
  body {
    margin: 0;
    font-family: 'Arial', sans-serif;
    background: linear-gradient(135deg, #1a1a1a, #0d0d0d);
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    min-height: 100vh;
    overflow-x: hidden;
    position: relative;
  }

  header { padding: 20px; text-align: center; }
  h1 { margin: 0; font-size: 2em; color: #ff4081; text-shadow: 1px 1px 5px #000; }

  .cover { width: 250px; height: 250px; margin: 20px; border-radius: 15px; overflow: hidden; box-shadow: 0 0 20px rgba(255,64,129,0.5); transition: transform 0.5s ease; }
  .cover img { width: 100%; height: 100%; object-fit: cover; }
  .cover:hover { transform: scale(1.05); }

  .controls { display: flex; align-items: center; gap: 20px; margin: 20px; }
  .btn { background: #ff4081; border: none; color: #fff; padding: 15px 20px; font-size: 1em; border-radius: 10px; cursor: pointer; transition: 0.3s; }
  .btn:hover { background: #e73370; transform: scale(1.1); }

  .progress-container { width: 80%; background: #333; border-radius: 10px; overflow: hidden; margin: 10px 0 30px 0; height: 10px; }
  .progress { background: #ff4081; width: 0%; height: 100%; transition: width 0.2s; }

  section { width: 90%; max-width: 800px; margin-bottom: 40px; }
  section h2 { color: #ff4081; border-bottom: 2px solid #ff4081; padding-bottom: 5px; }
  section p, section a { color: #fff; text-decoration: none; }

  .share { margin-top: 10px; display: flex; gap: 10px; }
  .share a { background: #444; padding: 10px 15px; border-radius: 8px; transition: 0.3s; }
  .share a:hover { background: #ff4081; color: #fff; }

  @media (max-width: 600px) {
    .cover { width: 180px; height: 180px; }
    .controls { flex-direction: column; }
  }

  canvas#bg-canvas { position: fixed; top:0; left:0; width:100%; height:100%; z-index: -1; }
</style>
</head>
<body>

<header><h1>Retro Dance Radio</h1></header>

<div class="cover">
  <img id="cover-img" src="covers/cover1.jpg" alt="Обложка трека">
</div>

<div class="controls">
  <button class="btn" id="play">▶️</button>
</div>

<div class="progress-container">
  <div class="progress" id="progress"></div>
</div>

<section>
  <h2>О радио</h2>
  <p>Retro Dance Radio — это лучшие танцевальные треки прямо в вашем браузере!</p>
</section>

<section>
  <h2>Контакты</h2>
  <p>Email: info@retrodanceradio.com</p>
  <p>Соцсети: <a href="#">Facebook</a> | <a href="#">Instagram</a></p>
</section>

<div class="share">
  <a href="#" onclick="shareRadio()">Поделиться радио</a>
</div>

<canvas id="bg-canvas"></canvas>

<script>
  // --- Поток радио ---
  const audio = new Audio('https://radio.retrodanceradio.com/listen/retro_dance_radio/radio.mp3');
  audio.crossOrigin = "anonymous";
  audio.autoplay = true;

  const playBtn = document.getElementById('play');
  const progress = document.getElementById('progress');
  const coverImg = document.getElementById('cover-img');

  playBtn.addEventListener('click', () => {
    if(audio.paused){
      audio.play();
      playBtn.textContent = "⏸️";
    } else {
      audio.pause();
      playBtn.textContent = "▶️";
    }
  });

  audio.addEventListener('timeupdate', () => {
    if(audio.duration){
      const percent = (audio.currentTime/audio.duration)*100;
      progress.style.width = percent + "%";
    }
  });

  function shareRadio(){
    if(navigator.share){
      navigator.share({title:'Retro Dance Radio', url:window.location.href});
    } else {
      alert("Скопируйте ссылку: "+window.location.href);
    }
  }

  // --- Canvas фон ---
  const canvas = document.getElementById('bg-canvas');
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  });

  const particles = [];
  const particleCount = 100;
  for(let i=0;i<particleCount;i++){
    particles.push({
      x: Math.random()*canvas.width,
      y: Math.random()*canvas.height,
      radius: Math.random()*3+1,
      dx:(Math.random()-0.5)*1,
      dy:(Math.random()-0.5)*1
    });
  }

  function animateParticles(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    const gradient = ctx.createLinearGradient(0,0,canvas.width,canvas.height);
    gradient.addColorStop(0,'#1a1a1a');
    gradient.addColorStop(1,'#0d0d0d');
    ctx.fillStyle = gradient;
    ctx.fillRect(0,0,canvas.width,canvas.height);

    particles.forEach(p=>{
      ctx.beginPath();
      ctx.arc(p.x,p.y,p.radius,0,Math.PI*2);
      ctx.fillStyle = '#ff4081';
      ctx.fill();
      p.x += p.dx;
      p.y += p.dy;
      if(p.x<0||p.x>canvas.width)p.dx*=-1;
      if(p.y<0||p.y>canvas.height)p.dy*=-1;
    });

    requestAnimationFrame(animateParticles);
  }

  animateParticles();

  // --- Автоматическая смена обложки каждые 30 секунд ---
  const covers = [
    'covers/cover1.jpg',
    'covers/cover2.jpg',
    'covers/cover3.jpg'
  ];
  let coverIndex = 0;

  function changeCover() {
    coverImg.src = covers[coverIndex];
    coverIndex = (coverIndex + 1) % covers.length;
  }

  setInterval(changeCover, 30000); // каждые 30 секунд
  changeCover();
</script>

</body>
</html>
