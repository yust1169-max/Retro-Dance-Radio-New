<!DOCTYPE html>
<html lang="ru" prefix="og: http://ogp.me/ns#">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    
    <title>Retro Dance Radio — Включай энергию прошлого!</title>
    
    <link rel="apple-touch-icon" href="https://i.postimg.cc/28VKXjCx/logo.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0d0d0d">

    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getFirestore, collection, addDoc, doc, setDoc, deleteDoc, query, orderBy, limit, onSnapshot, serverTimestamp, getDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

        try {
            const firebaseConfig = JSON.parse(window.__firebase_config || '{}');
            if (firebaseConfig.apiKey) {
                const app = initializeApp(firebaseConfig);
                const db = getFirestore(app);
                const auth = getAuth(app);
                window.FB_CORE = { 
                    db, auth, collection, addDoc, doc, setDoc, deleteDoc, getDoc,
                    query, orderBy, limit, onSnapshot, serverTimestamp, 
                    signInAnonymously, onAuthStateChanged, signInWithCustomToken
                };
            }
        } catch (e) { console.error("Firebase init failed", e); }
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');

        body {
            background-color: #0a1f3d; /* тёмно-голубой фон всего сайта */
            font-family: 'Inter', sans-serif;
            margin: 0;
            color: white;
            overflow-x: hidden;
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
        }

        /* Плеер с приятным голубым градиентом */
        .glass-blue {
            background: rgba(0, 170, 255, 0.15);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 40px;
        }

        .bg-sphere {
            position: fixed;
            width: 100vw;
            height: 100vw;
            background: radial-gradient(circle, rgba(0,170,255,0.15) 0%, transparent 70%);
            z-index: -1;
            filter: blur(120px);
            animation: move 30s infinite alternate linear;
        }

        @keyframes move { from { transform: translate(-25%, -25%); } to { transform: translate(25%, 25%); } }

        .marquee-container { overflow: hidden; white-space: nowrap; width: 100%; mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent); }
        .marquee-text { display: inline-block; animation: marquee 12s linear infinite; padding-right: 50px; }
        @keyframes marquee { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        input[type=range] { -webkit-appearance: none; background: rgba(255,255,255,0.1); border-radius: 10px; height: 6px; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 16px; width: 16px; border-radius: 50%; background: #00aaff; cursor: pointer; border: 2px solid white; }
    </style>

    <link rel="manifest" href="manifest.json">
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const LOGO_SRC = "https://i.postimg.cc/28VKXjCx/logo.png";
        const API_URL = "https://radio.retrodanceradio.com/api/nowplaying/retro_dance_radio";
        const REQUESTS_EMBED_URL = "https://radio.retrodanceradio.com/public/retro_dance_radio/embed-requests";
        const DEFAULT_COVER = "https://images.unsplash.com/photo-1470225620780-dba8ba36b745?q=80&w=1000&auto=format&fit=crop";

        const STREAMS = {
            high: "https://radio.retrodanceradio.com/radio/8000/128",
            low: "https://radio.retrodanceradio.com/radio/8000/32"
        };

        const Icon = ({ name, size = 18, className = "" }) => {
            useEffect(() => { if (window.lucide) window.lucide.createIcons(); }, [name, className, size]);
            return <i data-lucide={name} style={{ width: size, height: size }} className={`inline-block ${className}`}></i>;
        };

        const PlayButtonIcon = ({ isPlaying, size = 40 }) => (
            <div className="flex items-center justify-center">
                {isPlaying ? (
                    <svg width={size} height={size} viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="6" width="12" height="12" rx="1" /></svg>
                ) : (
                    <svg width={size} height={size} viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z" /></svg>
                )}
            </div>
        );
        
        // Здесь должен продолжаться твой оригинальный React-код приложения...
        // (Я обновил только константу STREAMS, как мы и договаривались)
    </script>
</body>
</html>